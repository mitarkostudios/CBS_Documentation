<h1> Profile Module </h1>

The profile module provides the ability to manage player data such as Display Name, Avatar URL, User Level info, etc.

The following settings are available in the editor



![](https://archbee-image-uploads.s3.amazonaws.com/eJQ_to_S35RjGyX2qhcYY/PEiicZAxZCaQOK9sv_6ce_image.png)

You can configure the level table here.

**Add new level - **Adds a new position for level configuration

**Import default level data - **Imports pre-configured default levels

When you have added levels - you can configure them.

You can set the value of the experience you need to reach the level.

![](https://archbee-image-uploads.s3.amazonaws.com/eJQ_to_S35RjGyX2qhcYY/Zb7axnMoQogNSJDtMGIIX_image.png)

You can also set the prizes that the player will receive upon reaching this level. You can add items, loot boxes and currencies.

![](https://archbee-image-uploads.s3.amazonaws.com/eJQ_to_S35RjGyX2qhcYY/B-KYjwBEhIPPDg9DGFhAP_image.png)

**Grant items on registraion -** You can set what items to give to the player immediately after registration. They will immediately go to the user's inventory. You cannot set the amount of currency that a player will receive after registration. This value is set in the currency configurator

![](https://archbee-image-uploads.s3.amazonaws.com/eJQ_to_S35RjGyX2qhcYY/e0x80lrWtT250asdtf6es_image.png)





### **API Methods**

****

**CBSProfile.OnDisplayNameUpdated**

An event that reports when the username has been updated.

> using CBS;

> using UnityEngine;

>

> public class ProfileExample : MonoBehaviour

> {

>     private IProfile ProfileModule { get; set; }

>

>     void Start()

>     {

>         ProfileModule = CBSModule.Get<CBSProfile>();

>         ProfileModule.OnDisplayNameUpdated += OnDisplayNameUpdated;

>     }

>

>     private void OnDisplayNameUpdated(CBSUpdateDisplayNameResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("User has successfully updated their nickname");

>         }

>     }

> }



**CBSProfile.OnAcountInfoGetted**

An event that reports when information about the current user has been received.

> using CBS;

> using UnityEngine;

>

> public class ProfileExample : MonoBehaviour

> {

>     private IProfile ProfileModule { get; set; }

>

>     void Start()

>     {

>         ProfileModule = CBSModule.Get<CBSProfile>();

>         ProfileModule.OnAcountInfoGetted += OnAcountInfoGetted;

>     }

>

>     private void OnAcountInfoGetted(CBSGetAccountInfoResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("User information has been updated from the server");

>         }

>     }

> }



**CBSProfile.OnPlayerExperienceUpdated**

An event that reports when the current player's experience points have been changed.

> using CBS;

> using UnityEngine;

>

> public class ProfileExample : MonoBehaviour

> {

>     private IProfile ProfileModule { get; set; }

>

>     void Start()

>     {

>         ProfileModule = CBSModule.Get<CBSProfile>();

>         ProfileModule.OnPlayerExperienceUpdated += OnPlayerExperienceUpdated;

>     }

>

>     private void OnPlayerExperienceUpdated(CBSUpdateLevelDataResult result)

>     {

>         if (result.IsSuccess)

>         {

>             var levelInfo = result.LevelInfo;

>             Debug.Log("New exp = " + levelInfo.CurrentExp);

>             Debug.Log("Current Level = " + levelInfo.CurrentLevel);

>             Debug.Log("Reach new level ? = " + levelInfo.NewLevelReached);

>         }

>     }

> }



**CBSProfile.UpdateUserName**

Update player display name.

> using CBS;

> using UnityEngine;

>

> public class ProfileExample : MonoBehaviour

> {

>     private IProfile ProfileModule { get; set; }

>

>     void Start()

>     {

>         ProfileModule = CBSModule.Get<CBSProfile>();

>

>         string newNickName = "Some name";

>         ProfileModule.UpdateUserName(newNickName, OnDisplayNameUpdated);

>     }

>

>     private void OnDisplayNameUpdated(CBSUpdateDisplayNameResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("User has successfully updated their nickname");

>         }

>     }

> }



**CBSProfile.GetAccountInfo**

Get full information of current player account. Include all Playfab origin result.

> using CBS;

> using UnityEngine;

>

> public class ProfileExample : MonoBehaviour

> {

>     private IProfile ProfileModule { get; set; }

>

>     void Start()

>     {

>         ProfileModule = CBSModule.Get<CBSProfile>();

>

>         ProfileModule.GetAccountInfo(OnAccountInfoGetted);

>     }

>

>     private void OnAccountInfoGetted(CBSGetAccountInfoResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("Display name = " + result.DisplayName);

>             Debug.Log("Avatar URL = " + result.AvatarUrl);

>         }

>     }

> }



**CBSProfile.GetUserAccountInfo**

Get full information of player account by id. Include all Playfab origin result.

> using CBS;

> using UnityEngine;

>

> public class ProfileExample : MonoBehaviour

> {

>     private IProfile ProfileModule { get; set; }

>

>     void Start()

>     {

>         ProfileModule = CBSModule.Get<CBSProfile>();

>         string profileId = "Some profile id";

>         ProfileModule.GetUserAccountInfo(profileId, OnAccountInfoGetted);

>     }

>

>     private void OnAccountInfoGetted(CBSGetAccountInfoResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("Display name = " + result.DisplayName);

>             Debug.Log("Avatar URL = " + result.AvatarUrl);

>         }

>     }

> }



**CBSProfile.AddPlayerExp**

Adds N points of experience to the current state. In the response, you can get information whether the player has reached a new level and also information about the reward about the new level.

> using CBS;

> using UnityEngine;

>

> public class ProfileExample : MonoBehaviour

> {

>     private IProfile ProfileModule { get; set; }

>

>     void Start()

>     {

>         ProfileModule = CBSModule.Get<CBSProfile>();

>         int pointsToAdd = 100;

>         ProfileModule.AddPlayerExp(pointsToAdd, OnExpAdded);

>     }

>

>     private void OnExpAdded(CBSUpdateLevelDataResult result)

>     {

>         var levelInfo = result.LevelInfo;

>         Debug.Log("User has successfully gained experience");

>         Debug.Log("New exp = " + levelInfo.CurrentExp);

>         Debug.Log("Current Level = " + levelInfo.CurrentLevel);

>         Debug.Log("Reach new level ? = " + levelInfo.NewLevelReached);

>     }

> }



**CBSProfile.GetPlayerLevelData**

Get information about current experience and player level.

> using CBS;

> using UnityEngine;

>

> public class ProfileExample : MonoBehaviour

> {

>     private IProfile ProfileModule { get; set; }

>

>     void Start()

>     {

>         ProfileModule = CBSModule.Get<CBSProfile>();

>         ProfileModule.GetPlayerLevelData(OnLevelInfoGetted);

>     }

>

>     private void OnLevelInfoGetted(CBSGetLevelDataResult result)

>     {

>         if (result.IsSuccess)

>         {

>             var levelInfo = result.LevelInfo;

>             Debug.Log("New exp = " + levelInfo.CurrentExp);

>             Debug.Log("Current Level = " + levelInfo.CurrentLevel);

>             Debug.Log("Next level at = " + levelInfo.NextLevelExp);

>         }

>     }

> }



**CBSProfile.GetLevelTable**

Get an array with information about all levels in the game.

> using CBS;

> using UnityEngine;

>

> public class ProfileExample : MonoBehaviour

> {

>     private IProfile ProfileModule { get; set; }

>

>     void Start()

>     {

>         ProfileModule = CBSModule.Get<CBSProfile>();

>         ProfileModule.GetLevelTable(OnLevelTableGetted);

>     }

>

>     private void OnLevelTableGetted(CBSGetLevelTableResult result)

>     {

>         if (result.IsSuccess)

>         {

>             var levelTable = result.Levels;

>             for (int i=0;i<levelTable.Table.Count;i++)

>             {

>                 var level = levelTable.Table[i];

>                 Debug.LogFormat("Level {0} - exp {1} ", i + 1, level.Expirience);

>             }

>         }

>     }

> }



**CBSProfile.GetPlayerProfile**

Get general game information about a player, including player ID, avatar url, display name, player level and clan information.

> using CBS;

> using UnityEngine;

>

> public class ProfileExample : MonoBehaviour

> {

>     private IProfile ProfileModule { get; set; }

>

>     void Start()

>     {

>         ProfileModule = CBSModule.Get<CBSProfile>();

>

>         string profileID = "Some profile id";

>

>         var getProfileRequest = new CBSGetProfileRequest {

>             ProfileID = profileID,

>             LoadClan = true,

>             LoadEntityId = true,

>             LoadLevel = true

>         };

>

>         ProfileModule.GetPlayerProfile(getProfileRequest, OnGetPlayerProfile);

>     }

>

>     private void OnGetPlayerProfile(CBSGetProfileResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("Player id = " + result.ProfileID);

>             Debug.Log("Entity id = " + result.EntityID);

>             Debug.Log("Avatar URL = " + result.AvatarURL);

>             Debug.Log("Nickname = " + result.DisplayName);

>             Debug.Log("Level = " + result.LevelData.CurrentLevel);

>             Debug.Log("Exist in clan ? " + result.ClanData.ExistInClan);

>         }

>     }

> }



**CBSProfile.UpdateAvatarUrl**

Update the current player's profile photo.

> using CBS;

> using UnityEngine;

>

> public class ProfileExample : MonoBehaviour

> {

>     private IProfile ProfileModule { get; set; }

>

>     void Start()

>     {

>         ProfileModule = CBSModule.Get<CBSProfile>();

>

>         string photoUrl = "https://your_photo_url";

>

>         ProfileModule.UpdateAvatarUrl(photoUrl, OnPhotoUrlUpdated);

>     }

>

>     private void OnPhotoUrlUpdated(CBSUpdateAvatarUrlResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("User image updated successfully");

>         }

>     }

> }



**CBSProfile.GetProfileData**

Get the specific player data of current profile by unique key.

> using CBS;

> using UnityEngine;

>

> public class ProfileExample : MonoBehaviour

> {

>     private IProfile ProfileModule { get; set; }

>

>     void Start()

>     {

>         ProfileModule = CBSModule.Get<CBSProfile>();

>

>         string dataKey = "Some data key";

>

>         ProfileModule.GetProfileData(dataKey, OnGetData);

>     }

>

>     private void OnGetData(CBSGetProfileDataResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("User data = "+result.Data["Some data key"]);

>         }

>     }

> }



**CBSProfile.GetProfileData**

Get the specific player data of current profile by unique keys.

> using CBS;

> using UnityEngine;

>

> public class ProfileExample : MonoBehaviour

> {

>     private IProfile ProfileModule { get; set; }

>

>     void Start()

>     {

>         ProfileModule = CBSModule.Get<CBSProfile>();

>

>         string dataKey1 = "Key1";

>         string dataKey2 = "Key2";

>         string dataKey3 = "Key3";

>

>         var dataKeys = new string[] {

>             dataKey1,

>             dataKey2,

>             dataKey3

>         };

>

>         ProfileModule.GetProfileData(dataKeys, OnGetData);

>     }

>

>     private void OnGetData(CBSGetProfileDataResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("User data with key 1 = " + result.Data["Key1"]);

>             Debug.Log("User data with key 2 = " + result.Data["Key2"]);

>             Debug.Log("User data with key 3 = " + result.Data["Key3"]);

>         }

>     }

> }

****

**CBSProfile.GetProfileDataByPlayerID**

Get the custom player data by user id

> using CBS;

> using UnityEngine;

>

> public class ProfileExample : MonoBehaviour

> {

>     private IProfile ProfileModule { get; set; }

>

>     void Start()

>     {

>         ProfileModule = CBSModule.Get<CBSProfile>();

>

>         string profileID = "Some profile ID";

>         string dataKey = "Some data key";

>

>         ProfileModule.GetProfileDataByPlayerID(profileID, dataKey, OnGetData);

>     }

>

>     private void OnGetData(CBSGetProfileDataResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("User data = " + result.Data["Some data key"]);

>         }

>     }

> }



**CBSProfile.GetProfileDataByPlayerID**

Get the custom player data by user id.

> using CBS;

> using UnityEngine;

>

> public class ProfileExample : MonoBehaviour

> {

>     private IProfile ProfileModule { get; set; }

>

>     void Start()

>     {

>         ProfileModule = CBSModule.Get<CBSProfile>();

>

>         string profileID = "Some profile id";

>

>         string dataKey1 = "Key1";

>         string dataKey2 = "Key2";

>         string dataKey3 = "Key3";

>

>         var dataKeys = new string[] {

>             dataKey1,

>             dataKey2,

>             dataKey3

>         };

>

>         ProfileModule.GetProfileDataByPlayerID(profileID, dataKeys, OnGetData);

>     }

>

>     private void OnGetData(CBSGetProfileDataResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("User data with key 1 = " + result.Data["Key1"]);

>             Debug.Log("User data with key 2 = " + result.Data["Key2"]);

>             Debug.Log("User data with key 3 = " + result.Data["Key3"]);

>         }

>     }

> }



**CBSProfile.SaveProfileData**

Set/Save custom player data of current profile.&#x20;

> using CBS;

> using UnityEngine;

>

> public class ProfileExample : MonoBehaviour

> {

>     private IProfile ProfileModule { get; set; }

>

>     void Start()

>     {

>         ProfileModule = CBSModule.Get<CBSProfile>();

>

>         string dataKey = "Key1";

>         string dataValue = "Some data value";

>

>         ProfileModule.SaveProfileData(dataKey, dataValue, OnSaveData);

>     }

>

>     private void OnSaveData(CBSSaveProfileDataResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("User data saved successfully");

>         }

>     }

> }

