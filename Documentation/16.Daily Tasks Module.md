<h1> Daily Tasks Module </h1>

With this module you can add daily tasks to players.

The following settings are available in the editor.

![](https://archbee-image-uploads.s3.amazonaws.com/eJQ_to_S35RjGyX2qhcYY/ge3bbhn9lmi2gm-hHu_JZ_image.png)

**Add new task -** Calls up a window for creating a new task.

![](https://archbee-image-uploads.s3.amazonaws.com/eJQ_to_S35RjGyX2qhcYY/xgZ8HKa6_OgHeV4jF6dqO_image.png)



**Task ID - **Unique id for task.

**Title** - The title of the task that will be displayed in the UI.

**Description - **Full description of the ефыл. For example, you can describe here what the player needs to do to complete the achievement.

**Tag - **Some mark for task. Can be used to sort your task.

![](https://archbee-image-uploads.s3.amazonaws.com/eJQ_to_S35RjGyX2qhcYY/_vF9nf7z80uEQxY7nk5OD_image.png)



**Task Type - **Task type. If OneShot is selected, the task will be completed the first time it is executed. If Steps - you need to perform several steps of the actions specified by you.

**Steps** - Number of steps to complete the task.

**Locked by level?** - Determines whether the task will be locked by player level. The player will be able to perform the task only when his level is equal to or higher.

**Level** - Level to lock task. Players will not be able to receive this task until they reach a certain level.

![](https://archbee-image-uploads.s3.amazonaws.com/eJQ_to_S35RjGyX2qhcYY/zvi4zZWGr18aR8TDpF2Rp_image.png)

**Sprite** - Sprite for game task. ATTENTION! The sprite is not saved on the server, it will be included in the build.

**External Icon URL** - You can use it for example for remote texture url.



### **API Methods**

****

**CBSDailyTasks.OnCompleteTask**

Notify when player complete task.

> using UnityEngine;

> using CBS;

>

> public class DailyTasksExample : MonoBehaviour

> {

>     private IDailyTasks DailyTasks { get; set; }

>

>     private void Start()

>     {

>         DailyTasks = CBSModule.Get<CBSDailyTasks>();

>

>         DailyTasks.OnCompleteTask += OnCompleteTask;

>     }

>

>     private void OnCompleteTask(CompleteTaskResult result)

>     {

>         var task = result.Task;

>         var debugText = string.Format("Achievement {0} is complete", task.Title);

>         Debug.Log(debugText);

>     }

> }



**CBSDailyTasks.OnPlayerRewarded**

Notify when player receive reward for task.

> using UnityEngine;

> using CBS;

>

> public class DailyTasksExample : MonoBehaviour

> {

>     private IDailyTasks DailyTasks { get; set; }

>

>     private void Start()

>     {

>         DailyTasks = CBSModule.Get<CBSDailyTasks>();

>

>         DailyTasks.OnPlayerRewarded += OnPlayerRewarded;

>     }

>

>     private void OnPlayerRewarded(PrizeObject result)

>     {

>         var rewardedItems = result.BundledItems;

>         var rewardedLootboxes = result.Lootboxes;

>         var rewardedCurrency = result.BundledVirtualCurrencies;

>     }

> }



**CBSDailyTasks.OnTaskReseted**

Notify when player reset tasks and get new.

> using UnityEngine;

> using CBS;

>

> public class DailyTasksExample : MonoBehaviour

> {

>     private IDailyTasks DailyTasks { get; set; }

>

>     private void Start()

>     {

>         DailyTasks = CBSModule.Get<CBSDailyTasks>();

>

>         DailyTasks.OnTaskReseted += OnTaskReseted;

>     }

>

>     private void OnTaskReseted(GetPlayerDailyTasksResult result)

>     {

>         var newTask = result.CurrentTasks;

>     }

> }



**CBSDailyTasks.GetAllDailyTasks**

Get list of all available tasks.

> using UnityEngine;

> using CBS;

>

> public class DailyTasksExample : MonoBehaviour

> {

>     private IDailyTasks DailyTasks { get; set; }

>

>     private void Start()

>     {

>         DailyTasks = CBSModule.Get<CBSDailyTasks>();

>

>         DailyTasks.GetAllDailyTasks(OnGetTasks);

>     }

>

>     private void OnGetTasks(GetAllDailyTasksResult result)

>     {

>         var allTask = result.TasksData.DailyTasks;

>     }

> }



**CBSDailyTasks.GetPlayerDailyTasks**

Get daily tasks for current player.

> using UnityEngine;

> using CBS;

>

> public class DailyTasksExample : MonoBehaviour

> {

>     private IDailyTasks DailyTasks { get; set; }

>

>     private void Start()

>     {

>         DailyTasks = CBSModule.Get<CBSDailyTasks>();

>

>         DailyTasks.GetPlayerDailyTasks(OnGetTasks);

>     }

>

>     private void OnGetTasks(GetPlayerDailyTasksResult result)

>     {

>         var tasksForPlayerToday = result.CurrentTasks;

>     }

> }



**CBSDailyTasks.AddTaskPoint**

Adds a point to an task. For Tasks "OneShot" completes it immediately, for Tasks "Steps" - adds one step

> using UnityEngine;

> using CBS;

>

> public class DailyTasksExample : MonoBehaviour

> {

>     private IDailyTasks DailyTasks { get; set; }

>

>     private void Start()

>     {

>         DailyTasks = CBSModule.Get<CBSDailyTasks>();

>

>         var someTaskID = "task id";

>

>         DailyTasks.AddTaskPoint(someTaskID, OnAddPoints);

>     }

>

>     private void OnAddPoints(ModifyTaskPointResult result)

>     {

>         var isCompleteTask = result.Task.IsComplete;

>     }

> }

> using UnityEngine;

> using CBS;

>

> public class DailyTasksExample : MonoBehaviour

> {

>     private IDailyTasks DailyTasks { get; set; }

>

>     private void Start()

>     {

>         DailyTasks = CBSModule.Get<CBSDailyTasks>();

>

>         var someTaskID = "task id";

>         var pointsToAdd = 4;

>

>         DailyTasks.AddTaskPoint(someTaskID, pointsToAdd, OnAddPoints);

>     }

>

>     private void OnAddPoints(ModifyTaskPointResult result)

>     {

>         var isCompleteTask = result.Task.IsComplete;

>     }

> }



**CBSDailyTasks.UpdateTaskPoint**

Updates the task points you specified. More suitable for Steps tasks.

> using UnityEngine;

> using CBS;

>

> public class DailyTasksExample : MonoBehaviour

> {

>     private IDailyTasks DailyTasks { get; set; }

>

>     private void Start()

>     {

>         DailyTasks = CBSModule.Get<CBSDailyTasks>();

>

>         var someTaskID = "task id";

>         var pointsToUpdate = 4;

>

>         DailyTasks.UpdateTaskPoint(someTaskID, pointsToUpdate, OnUpdatePoints);

>     }

>

>     private void OnUpdatePoints(ModifyTaskPointResult result)

>     {

>         var isCompleteTask = result.Task.IsComplete;

>     }

> }



**CBSDailyTasks.PickupTaskReward**

Pick up a reward from a completed task if it hasn't been picked up before.

> using UnityEngine;

> using CBS;

>

> public class DailyTasksExample : MonoBehaviour

> {

>     private IDailyTasks DailyTasks { get; set; }

>

>     private void Start()

>     {

>         DailyTasks = CBSModule.Get<CBSDailyTasks>();

>

>         var someTaskID = "task id";

>

>         DailyTasks.PickupTaskReward(someTaskID, OnGetReward);

>     }

>

>     private void OnGetReward(ModifyTaskPointResult result)

>     {

>         var reward = result.ReceivedReward;

>

>         var rewardedItems = reward.BundledItems;

>         var rewardedLootboxes = reward.Lootboxes;

>         var rewardedCurrency = reward.BundledVirtualCurrencies;

>     }

> }



**CBSDailyTasks.ResetAndGetNewTasks**

Reset current player tasks state and get new random tasks.

> using UnityEngine;

> using CBS;

>

> public class DailyTasksExample : MonoBehaviour

> {

>     private IDailyTasks DailyTasks { get; set; }

>

>     private void Start()

>     {

>         DailyTasks = CBSModule.Get<CBSDailyTasks>();

>

>         DailyTasks.ResetAndGetNewTasks( OnGetReward);

>     }

>

>     private void OnGetReward(GetPlayerDailyTasksResult result)

>     {

>         if (result.IsSuccess)

>         {

>             var newTasksForPlayer = result.CurrentTasks;

>         }

>     }

> }

>

