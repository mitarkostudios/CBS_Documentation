<h1> API Methods </h1>

**CBSItems.OnItemPurchased**

Notify when item was purchased.

> using CBS;

> using UnityEngine;

>

> public class ItemsExample : MonoBehaviour

> {

>     private ICBSItems ItemModule { get; set; }

>

>     private void Start()

>     {

>         ItemModule = CBSModule.Get<CBSItems>();

>

>         ItemModule.OnItemPurchased += OnItemPurchased;

>     }

>

>     private void OnItemPurchased(CBSPurchaseItemResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("User has successfully bought an item with id " + result.PurchasedItem.ID);

>         }

>     }

> }



**CBSItems.OnPackPurchased**

Notify when items pack was purchased.

> using CBS;

> using UnityEngine;

>

> public class ItemsExample : MonoBehaviour

> {

>     private ICBSItems ItemModule { get; set; }

>

>     private void Start()

>     {

>         ItemModule = CBSModule.Get<CBSItems>();

>

>         ItemModule.OnPackPurchased += OnPackPurchased;

>     }

>

>     private void OnPackPurchased(PurchasePackResult result)

>     {

>         if (result.IsSuccess)

>         {

>             var grantedItems = result.GrandedItem;

>             foreach (var item in grantedItems)

>             {

>                 Debug.Log("Grant item with id = " + item.ID);

>             }

>         }

>     }

> }



**CBSItems.OnLootboxPurchased**

Notify when loot box was purchased.

> using CBS;

> using UnityEngine;

>

> public class ItemsExample : MonoBehaviour

> {

>     private ICBSItems ItemModule { get; set; }

>

>     private void Start()

>     {

>         ItemModule = CBSModule.Get<CBSItems>();

>

>         ItemModule.OnLootboxPurchased += OnLootboxPurchased;

>     }

>

>     private void OnLootboxPurchased(PurchaseLootboxResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("User has successfully bought an loot box with id " + result.PurchasedItem.ID);

>         }

>     }

> }



**CBSItems.OnItemGranted**

Notify when item was granted to user.

> using CBS;

> using UnityEngine;

>

> public class ItemsExample : MonoBehaviour

> {

>     private ICBSItems ItemModule { get; set; }

>

>     private void Start()

>     {

>         ItemModule = CBSModule.Get<CBSItems>();

>

>         ItemModule.OnItemGranted += OnItemGranted;

>     }

>

>     private void OnItemGranted(GrandItemResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("The user has been successfully granted with an item from the ID " + result.GrandItem.ID);

>         }

>     }

> }



**CBSItems.OnPackGranted**

Notify when items pack was granted to user.

> using CBS;

> using UnityEngine;

>

> public class ItemsExample : MonoBehaviour

> {

>     private ICBSItems ItemModule { get; set; }

>

>     private void Start()

>     {

>         ItemModule = CBSModule.Get<CBSItems>();

>

>         ItemModule.OnPackGranted += OnPackGranted;

>     }

>

>     private void OnPackGranted(GrandPackResult result)

>     {

>         if (result.IsSuccess)

>         {

>             var grantedItems = result.GrandedItem;

>             foreach (var item in grantedItems)

>             {

>                 Debug.Log("Grant item with id = " + item.ID);

>             }

>         }

>     }

> }



**CBSItems.OnLootboxGranted**

Notify when loot box was granted to user.

> using CBS;

> using UnityEngine;

>

> public class ItemsExample : MonoBehaviour

> {

>     private ICBSItems ItemModule { get; set; }

>

>     private void Start()

>     {

>         ItemModule = CBSModule.Get<CBSItems>();

>

>         ItemModule.OnLootboxGranted += OnLootboxGranted;

>     }

>

>     private void OnLootboxGranted(GrandLootboxResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("User has successfully granted an loot box with id " + result.GrandedBox.ID);

>         }

>     }

> }



**CBSItems.FetchAll**

Updates the state of all items from the Playfab database. Do not use unnecessarily. This method is called at login.

> using CBS;

> using UnityEngine;

>

> public class ItemsExample : MonoBehaviour

> {

>     private ICBSItems ItemModule { get; set; }

>

>     private void Start()

>     {

>         ItemModule = CBSModule.Get<CBSItems>();

>

>         ItemModule.FetchAll(OnFetchAllItems);

>     }

>

>     private void OnFetchAllItems(FetchAllResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("All items count = " + result.Items.Count);

>             Debug.Log("All packs count = " + result.Packs.Count);

>             Debug.Log("All loot boxes count = " + result.Lootboxes.Count);

>         }

>     }

> }



**CBSItems.GetCategories**

Get all categories by specific items type.

> using CBS;

> using UnityEngine;

>

> public class ItemsExample : MonoBehaviour

> {

>     private ICBSItems ItemModule { get; set; }

>

>     private void Start()

>     {

>         ItemModule = CBSModule.Get<CBSItems>();

>

>         ItemModule.GetCategories(ItemType.ITEMS, OnGetItemsCategories);

>         ItemModule.GetCategories(ItemType.ITEMS, OnGetPacksCategories);

>         ItemModule.GetCategories(ItemType.ITEMS, OnGetLootboxCategories);

>     }

>

>     private void OnGetItemsCategories(GetCategoriesResult result)

>     {

>         if (result.IsSuccess)

>         {

>             foreach(var category in result.Categories)

>             {

>                 Debug.Log(category);

>             }

>         }

>     }

>

>     private void OnGetPacksCategories(GetCategoriesResult result)

>     {

>         if (result.IsSuccess)

>         {

>             foreach (var category in result.Categories)

>             {

>                 Debug.Log(category);

>             }

>         }

>     }

>

>     private void OnGetLootboxCategories(GetCategoriesResult result)

>     {

>         if (result.IsSuccess)

>         {

>             foreach (var category in result.Categories)

>             {

>                 Debug.Log(category);

>             }

>         }

>     }

> }



**CBSItems.GetItems**

Get all items available from Playfab database.

> using CBS;

> using UnityEngine;

>

> public class ItemsExample : MonoBehaviour

> {

>     private ICBSItems ItemModule { get; set; }

>

>     private void Start()

>     {

>         ItemModule = CBSModule.Get<CBSItems>();

>

>         ItemModule.GetItems(OnGetItems);

>     }

>

>     private void OnGetItems(GetItemsResult result)

>     {

>         if (result.IsSuccess)

>         {

>             foreach (var item in result.Items)

>             {

>                 Debug.Log("Item ID = "+item.ID);

>             }

>         }

>     }

> }



**CBSItems.GetItemsByCategory**

Get all items available from Playfab database by category.

> using CBS;

> using UnityEngine;

>

> public class ItemsExample : MonoBehaviour

> {

>     private ICBSItems ItemModule { get; set; }

>

>     private void Start()

>     {

>         ItemModule = CBSModule.Get<CBSItems>();

>

>         string category = "your category";

>

>         ItemModule.GetItemsByCategory(category, OnGetItems);

>     }

>

>     private void OnGetItems(GetItemsResult result)

>     {

>         if (result.IsSuccess)

>         {

>             foreach (var item in result.Items)

>             {

>                 Debug.Log("Item ID = "+item.ID);

>             }

>         }

>     }

> }



**CBSItems.GetItemByID**

Get specific item information by id.

> using CBS;

> using UnityEngine;

>

> public class ItemsExample : MonoBehaviour

> {

>     private ICBSItems ItemModule { get; set; }

>

>     private void Start()

>     {

>         ItemModule = CBSModule.Get<CBSItems>();

>

>         string itemID = "your item id";

>

>         ItemModule.GetItemByID(itemID, OnGetItem);

>     }

>

>     private void OnGetItem(GetItemResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("Item ID = " + result.Item.ID);

>         }

>     }

> }



**CBSItems.PurchaseItem**

Purchase item by id. The currency will be debited automatically and the item will be added to the inventory.

> using CBS;

> using UnityEngine;

>

> public class ItemsExample : MonoBehaviour

> {

>     private ICBSItems ItemModule { get; set; }

>

>     private void Start()

>     {

>         ItemModule = CBSModule.Get<CBSItems>();

>

>         string itemID = "your item id";

>         string currencyCode = "GD";

>         int currencyValue = 10;

>

>         ItemModule.PurchaseItem(itemID, currencyCode, currencyValue, OnPurchaseItem);

>     }

>

>     private void OnPurchaseItem(CBSPurchaseItemResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("Item ID = " + result.PurchasedItem.ID);

>         }

>     }

> }



**CBSItems.GrantItem**

Add item to user. The item automatically goes into inventory.

>

> using CBS;

> using UnityEngine;

>

> public class ItemsExample : MonoBehaviour

> {

>     private ICBSItems ItemModule { get; set; }

>

>     private void Start()

>     {

>         ItemModule = CBSModule.Get<CBSItems>();

>

>         string itemID = "your item id";

>

>         ItemModule.GrantItem(itemID, OnGrantItem);

>     }

>

>     private void OnGrantItem(GrantItemResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("Item ID = " + result.GrantItem.ID);

>         }

>     }

> }



**CBSItems.GrantItems**

Add multiple items to user. The items automatically goes into inventory.

> using CBS;

> using UnityEngine;

>

> public class ItemsExample : MonoBehaviour

> {

>     private ICBSItems ItemModule { get; set; }

>

>     private void Start()

>     {

>         ItemModule = CBSModule.Get<CBSItems>();

>

>         var items = new string[] { 

>             "Item1",

>             "Item2",

>             "Item3"

>         };

>

>         ItemModule.GrantItems(items, OnGrantItems);

>     }

>

>     private void OnGrantItems(GrantItemsResult result)

>     {

>         if (result.IsSuccess)

>         {

>             foreach (var item in result.GrantItems)

>             {

>                 Debug.Log("Item ID = " + item.ID);

>             }

>         }

>     }

> }



**CBSItems.GetPacks**

Get all items packs available from Playfab database.

> using CBS;

> using UnityEngine;

>

> public class ItemsExample : MonoBehaviour

> {

>     private ICBSItems ItemModule { get; set; }

>

>     private void Start()

>     {

>         ItemModule = CBSModule.Get<CBSItems>();

>

>         ItemModule.GetPacks(OnGetPacks);

>     }

>

>     private void OnGetPacks(GetPacksResult result)

>     {

>         if (result.IsSuccess)

>         {

>             var packs = result.Packs;

>             foreach (var pack in packs)

>             {

>                 Debug.Log("Pack name = " + pack.DisplayName);

>             }

>         }

>     }

> }



**CBSItems.GetPacksByCategory**

Get all items packs available from Playfab database by category.

> using CBS;

> using UnityEngine;

>

> public class ItemsExample : MonoBehaviour

> {

>     private ICBSItems ItemModule { get; set; }

>

>     private void Start()

>     {

>         ItemModule = CBSModule.Get<CBSItems>();

>

>         string category = "your pack category";

>

>         ItemModule.GetPacksByCategory(category, OnGetPacks);

>     }

>

>     private void OnGetPacks(GetPacksResult result)

>     {

>         if (result.IsSuccess)

>         {

>             var packs = result.Packs;

>             foreach (var pack in packs)

>             {

>                 Debug.Log("Pack name = " + pack.DisplayName);

>             }

>         }

>     }

> }



**CBSItems.GetPackByID**

Get specific items pack information by id.

> using CBS;

> using UnityEngine;

>

> public class ItemsExample : MonoBehaviour

> {

>     private ICBSItems ItemModule { get; set; }

>

>     private void Start()

>     {

>         ItemModule = CBSModule.Get<CBSItems>();

>

>         string packID = "your pack id";

>

>         ItemModule.GetPackByID(packID, OnGetPack);

>     }

>

>     private void OnGetPack(GetPackResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("Pack name = " + result.Pack.DisplayName);

>         }

>     }

> }



**CBSItems.PurchasePack**

Purchase items pack by id. The currency will be debited automatically and the items from pack will be added to the inventory.

> using CBS;

> using UnityEngine;

>

> public class ItemsExample : MonoBehaviour

> {

>     private ICBSItems ItemModule { get; set; }

>

>     private void Start()

>     {

>         ItemModule = CBSModule.Get<CBSItems>();

>

>         string packID = "your pack id";

>         string currencyCode = "GD";

>         int currencyValue = 10;

>

>         ItemModule.PurchasePack(packID, currencyCode, currencyValue, OnPurchaseItem);

>     }

>

>     private void OnPurchaseItem(PurchasePackResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("Purchase pack success");

>         }

>     }

> }



**CBSItems.GrantPack**

Add items pack to user. The items from pack automatically goes into inventory.

> using CBS;

> using UnityEngine;

>

> public class ItemsExample : MonoBehaviour

> {

>     private ICBSItems ItemModule { get; set; }

>

>     private void Start()

>     {

>         ItemModule = CBSModule.Get<CBSItems>();

>

>         string packID = "your pack id";

>

>         ItemModule.GrantPack(packID, OnPurchaseItem);

>     }

>

>     private void OnPurchaseItem(GrandPackResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("Grant pack success");

>         }

>     }

> }



**CBSItems.GetLootboxes**

Get all loot boxws available from Playfab database.

> using CBS;

> using UnityEngine;

>

> public class ItemsExample : MonoBehaviour

> {

>     private ICBSItems ItemModule { get; set; }

>

>     private void Start()

>     {

>         ItemModule = CBSModule.Get<CBSItems>();

>

>         ItemModule.GetLootboxes(OnGetLootBoxes);

>     }

>

>     private void OnGetLootBoxes(GetLootboxesResult result)

>     {

>         if (result.IsSuccess)

>         {

>             var lootboxes = result.Lootboxes;

>             foreach (var lootbox in lootboxes)

>             {

>                 Debug.Log("Lootbox name = "+lootbox.DisplayName);

>             }

>         }

>     }

> }



**CBSItems.GetLootboxesByCategory**

Get all loot boxws available from Playfab database by category.

> using CBS;

> using UnityEngine;

>

> public class ItemsExample : MonoBehaviour

> {

>     private ICBSItems ItemModule { get; set; }

>

>     private void Start()

>     {

>         ItemModule = CBSModule.Get<CBSItems>();

>

>         string category = "Your loot box category";

>

>         ItemModule.GetLootboxesByCategory(category, OnGetLootBoxes);

>     }

>

>     private void OnGetLootBoxes(GetLootboxesResult result)

>     {

>         if (result.IsSuccess)

>         {

>             var lootboxes = result.Lootboxes;

>             foreach (var lootbox in lootboxes)

>             {

>                 Debug.Log("Lootbox name = "+lootbox.DisplayName);

>             }

>         }

>     }

> }



**CBSItems.GetLootboxByID**

Get specific loot box information by id.

> using CBS;

> using UnityEngine;

>

> public class ItemsExample : MonoBehaviour

> {

>     private ICBSItems ItemModule { get; set; }

>

>     private void Start()

>     {

>         ItemModule = CBSModule.Get<CBSItems>();

>

>         string lootID = "Your loot box id";

>

>         ItemModule.GetLootboxByID(lootID, OnGetLootBox);

>     }

>

>     private void OnGetLootBox(GetLootboxResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("Loot box name = "+result.Lootbox.DisplayName);

>         }

>     }

> }



**CBSItems.PurchaseLootbox**

Purchase loot box by id. The currency will be debited automatically and the loot box will be added to the inventory.

> using CBS;

> using UnityEngine;

>

> public class ItemsExample : MonoBehaviour

> {

>     private ICBSItems ItemModule { get; set; }

>

>     private void Start()

>     {

>         ItemModule = CBSModule.Get<CBSItems>();

>

>         string packID = "your loot id";

>         string currencyCode = "GD";

>         int currencyValue = 10;

>

>         ItemModule.PurchaseLootbox(packID, currencyCode, currencyValue, OnPurchaseLootbox);

>     }

>

>     private void OnPurchaseLootbox(PurchaseLootboxResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("Purchase lootbox success");

>         }

>     }

> }



**CBSItems.GrantLootbox**

Add loot box to user. The loot box automatically goes into inventory.

> using CBS;

> using UnityEngine;

>

> public class ItemsExample : MonoBehaviour

> {

>     private ICBSItems ItemModule { get; set; }

>

>     private void Start()

>     {

>         ItemModule = CBSModule.Get<CBSItems>();

>

>         string lootID = "your loot id";

>

>         ItemModule.GrantLootbox(lootID, OnGrantLootbox);

>     }

>

>     private void OnGrantLootbox(GrandLootboxResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("Grant lootbox success");

>         }

>     }

> }

