<h1> Battle Pass Module </h1>

This module will allow you to add the popular game mechanic - Battle Pass. This module will allow you to reward players for completing game activities.

The following settings are available in the editor.

![](https://archbee-image-uploads.s3.amazonaws.com/eJQ_to_S35RjGyX2qhcYY/ssfYQgDT91AHAhbkcD9jY_image.png)

**Add new Instance** - Allows you to create a new instance of Battle Pass.

**Remove - **Allow you to remove cuurent active instance.

**Save - **Allows you to save all changes made you in the configurations of the active instance.

![](https://archbee-image-uploads.s3.amazonaws.com/eJQ_to_S35RjGyX2qhcYY/uKMH7MVd66fYfOM2tA7SS_image.png)

**Dev State - **Allows you to change the state of instance. In Dev state users will not see this instance.

**Display Name - **The name to be displayed in the header.

**Experience step - **Describes how much experience the player needs to gain in order to reach the next level.

**Start Date/End Date** - Specify the start and end date of the current instance of Battle pass. Please note server time is used.

![](https://archbee-image-uploads.s3.amazonaws.com/eJQ_to_S35RjGyX2qhcYY/abzYku4mopuaaHEeLTRVY_image.png)

**Custom Data - **Here you can set up personal data for the instance of Battle Pass. To customize your data - create a new class and inherit from the class - **CBSBattlePassCustomData**. Create fields to describe the item. **Attention only to fields, does not work with properties.**
Simple data types are supported (int, float, bool, enum, etc.)

![](https://archbee-image-uploads.s3.amazonaws.com/eJQ_to_S35RjGyX2qhcYY/AFrU6QcbjqHKTZDhM-v2d_image.png)

Now that you have created a class, you can see it in the list for selection

![](https://archbee-image-uploads.s3.amazonaws.com/eJQ_to_S35RjGyX2qhcYY/fxGjXb8irly36dg0Axo9u_image.png)

**Default reward/Premium reward** - Allows you to switch between reward configurations for the regular line and premium.

**+ Reward** - Calls up a window where you can configure rewards for the level.

![](https://archbee-image-uploads.s3.amazonaws.com/eJQ_to_S35RjGyX2qhcYY/NVo_MA7ArUyhHBVelhvKD_image.png)

**Add level** - Allows you to add new levels for the current instance of Battle Pass.



### **API Methods**

****

**CBSBattlePass.OnRewardRecived**

Notify when the reward was received.

> using CBS;

> using UnityEngine;

>

> public class BattlePassExample : MonoBehaviour

> {

>     private IBattlePass BattleBass { get; set; }

>

>     void Start()

>     {

>         BattleBass.OnRewardRecived += OnReviceReward;

>     }

>

>     private void OnDestroy()

>     {

>         BattleBass.OnRewardRecived -= OnReviceReward;

>     }

>

>     private void OnReviceReward(PrizeObject prizeObject)

>     {

>         Debug.Log("The player has just received an award");

>     }

> }



**CBSBattlePass.OnExpirienceAdded**

Notify when experience has been gained for a specific Battle Pass.

> using CBS;

> using UnityEngine;

>

> public class BattlePassExample : MonoBehaviour

> {

>     private IBattlePass BattleBass { get; set; }

>

>     void Start()

>     {

>         BattleBass.OnExpirienceAdded += OnUpdateExp;

>     }

>

>     private void OnDestroy()

>     {

>         BattleBass.OnExpirienceAdded -= OnUpdateExp;

>     }

>

>     private void OnUpdateExp(string battlePassID, int updatedExp)

>     {

>         var infoTxt = string.Format("Experience just updated in Battle Pass with id {0}.New exp value = {1}", battlePassID, updatedExp);

>         Debug.Log(infoTxt);

>     }

> }



**CBSBattlePass.OnPremiumAccessGranted**

Notify when premium access has been unlocked for a specific Battle Pass.

> using CBS;

> using UnityEngine;

>

> public class BattlePassExample : MonoBehaviour

> {

>     private IBattlePass BattleBass { get; set; }

>

>     void Start()

>     {

>         BattleBass.OnPremiumAccessGranted += OnPremiumAccessGranted;

>     }

>

>     private void OnDestroy()

>     {

>         BattleBass.OnPremiumAccessGranted -= OnPremiumAccessGranted;

>     }

>

>     private void OnPremiumAccessGranted(string battlePassID)

>     {

>         Debug.Log("User just received premium access in Battle pass with ID "+ battlePassID);

>     }

> }



**CBSBattlePass.GetPlayerStates**

Get information about the state of the player's instances of Battle passes. Does not contain complete information about levels and rewards. More suitable for implementing badges.

> using CBS;

> using UnityEngine;

>

> public class BattlePassExample : MonoBehaviour

> {

>     private IBattlePass BattleBass { get; set; }

>

>     void Start()

>     {

>         var request = new BattlePassPlayerStateRequest { 

>             IncludeNotStarted = true,

>             IncludeOutdated = false

>         };

>         BattleBass.GetPlayerStates(request, OnGetBattlePassStates);

>     }

>

>     private void OnGetBattlePassStates(GetPlayerBattlePassStatesResult result)

>     {

>         if (result.IsSuccess)

>         {

>             var allStates = result.PlayerStates;

>             foreach (var state in allStates)

>             {

>                 var passID = state.BattlePassID;

>                 var passName = state.BattlePassName;

>                 var passExp = state.ExpOfCurrentLevel;

>                 var passExpStep = state.ExpStep;

>                 var isActiveNow = state.IsActive;

>                 var badgeCount = state.RewardBadgeCount;

>             }

>         }

>     }

> }



**CBSBattlePass.GetBattlePassFullInformation**

Get complete information about the state of the player's instances of Battle passes and instance levels. Contains complete information about levels and rewards.



> using CBS;

> using UnityEngine;

>

> public class BattlePassExample : MonoBehaviour

> {

>     private IBattlePass BattleBass { get; set; }

>

>     void Start()

>     {

>         var battlePassID = "some_battle_pass_id";

>         BattleBass.GetBattlePassFullInformation(battlePassID, OnGetBattlePassInfo);

>     }

>

>     private void OnGetBattlePassInfo(GetBattlePassFullInformationResult result)

>     {

>         if (result.IsSuccess)

>         {

>             var instance = result.Instance;

>             var playerState = result.PlayerState;

>             var passID = instance.ID;

>             var passName = instance.DisplayName;

>             var passExp = playerState.ExpOfCurrentLevel;

>             var passExpStep = instance.ExpStep;

>             var isActiveNow = playerState.IsActive;

>             var levels = instance.LevelTree;

>             var parsedLevelsInfo = result.GetLevelTreeDetailList();

>         }

>     }

> }



**CBSBattlePass.AddExpirienceToInstance**

Add player experience for a specific instance of Battle Pass.

> using CBS;

> using UnityEngine;

>

> public class BattlePassExample : MonoBehaviour

> {

>     private IBattlePass BattleBass { get; set; }

>

>     void Start()

>     {

>         var battlePassID = "some_battle_pass_id";

>         var expToAdd = 10;

>         BattleBass.AddExpirienceToInstance(battlePassID, expToAdd, OnAddExp);

>     }

>

>     private void OnAddExp(AddExpirienceToInstanceResult result)

>     {

>         if (result.IsSuccess)

>         {

>             var passID = result.InstanceID;

>             var newExp = result.NewExp;

>         }

>     }

> }



**CBSBattlePass.AddExpirienceToAllActiveInstances**

Add player experience for all active instances of Battle Passes.

> using CBS;

> using UnityEngine;

>

> public class BattlePassExample : MonoBehaviour

> {

>     private IBattlePass BattleBass { get; set; }

>

>     void Start()

>     {

>         var expToAdd = 10;

>         BattleBass.AddExpirienceToAllActiveInstances(expToAdd, OnAddExp);

>     }

>

>     private void OnAddExp(AddExpirienceToAllInstancesResult result)

>     {

>         if (result.IsSuccess)

>         {

>             var instances = result.NewExpTable;

>             foreach (var expPair in instances)

>             {

>                 var passID = expPair.Key;

>                 var newExp = expPair.Value;

>             }

>         }

>     }

> }



**CBSBattlePass.GrantAwardToPlayer**

Grant the player a reward from a specific instance of Battle Pass.

> using CBS;

> using UnityEngine;

>

> public class BattlePassExample : MonoBehaviour

> {

>     private IBattlePass BattleBass { get; set; }

>

>     void Start()

>     {

>         var battlePassID = "some_battle_pass_id";

>         var battlePassLevelIndex = 3;

>         var isPremiumReward = true;

>         BattleBass.GrantAwardToPlayer(battlePassID, battlePassLevelIndex, isPremiumReward, OnGrantReward);

>     }

>

>     private void OnGrantReward(GrandAwardToPlayerResult result)

>     {

>         if (result.IsSuccess)

>         {

>             var reward = result.RecivedReward;

>         }

>     }

> }



**CBSBattlePass.GrantPremiumAccessToPlayer**

Give the player premium access for a specific instance of Battle Pass.

> using CBS;

> using UnityEngine;

>

> public class BattlePassExample : MonoBehaviour

> {

>     private IBattlePass BattleBass { get; set; }

>

>     void Start()

>     {

>         var battlePassID = "some_battle_pass_id";

>         BattleBass.GrantPremiumAccessToPlayer(battlePassID, OnPremiumAccessGranted);

>     }

>

>     private void OnPremiumAccessGranted(GrantPremiumAccessResult result)

>     {

>         if (result.IsSuccess)

>         {

>             var passId = result.InstanceID;

>         }

>     }

> }



**CBSBattlePass.ResetBattlePassPlayerState**

Reset player data for a specific Battle Pass..

> using CBS;

> using UnityEngine;

>

> public class BattlePassExample : MonoBehaviour

> {

>     private IBattlePass BattleBass { get; set; }

>

>     void Start()

>     {

>         var battlePassID = "some_battle_pass_id";

>         BattleBass.ResetBattlePassPlayerState(battlePassID, OnBattlePassReset);

>     }

>

>     private void OnBattlePassReset(ResetBattlePassStateResult result)

>     {

>         if (result.IsSuccess)

>         {

>             var passId = result.InstanceID;

>         }

>     }

> }

