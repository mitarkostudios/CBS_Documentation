<h1> Currency Module </h1>

Currency module allows you to manage transactions related to game currency. Accrual, purchase, store with currency, etc. I recommend that you start building the game economy from this particular module, since the game currency is very tied to other modules.

The following settings are available in the editor.&#x20;

![](https://archbee-image-uploads.s3.amazonaws.com/eJQ_to_S35RjGyX2qhcYY/fT-LTMynYyMd_Jh5gLfgx_image.png)

**Import default - **Imports pre-configured default levels.

**Add new currency - **Add your own game currency.

![](https://archbee-image-uploads.s3.amazonaws.com/eJQ_to_S35RjGyX2qhcYY/MisDiy8b8Wg7xk5uFzSjG_image.png)

**Currency code - **Unique code for game currency. Consists of two uppercase characters. For example for gold - GD.

**Display name - **Full name of the game currency.

**Initial deposit - **The value of the game currency, which will be automatically credited to the player after registration.

**Recharge rate per day - **The amount of game currency that will be credited to the player every day.

**Recharge maximum - **The maximum value of the game currency at which the daily accrual will be stopped.

**Sprite - **Sprite for game currency. ATTENTION! The sprite is not saved on the server, it will be included in the build.

Now that you have created the game currency, you can make packs of game currencies in order to add currency to the user in bulk or make a currency store.

![](https://archbee-image-uploads.s3.amazonaws.com/eJQ_to_S35RjGyX2qhcYY/I9Zei5DJOLGipmgUevxa7_image.png)

![](https://archbee-image-uploads.s3.amazonaws.com/eJQ_to_S35RjGyX2qhcYY/DgJxI9TS7tNB7UgQWRdPQ_image.png)

**Pack ID - **Unique id for currency pack.

**Title - **Full name of the pack.

**Sprite -** Sprite for game currency. ATTENTION! The sprite is not saved on the server, it will be included in the build

**Description - **Full description of pack.

**External URL - **You can use it for example for remote texture url.

**Tag - **Use this tag for sorting pack.

**Price title - **Use this title to describe price. For example 4.99 USD.



### **API Methods**

****

**CBSCurrency.OnCurrencyUpdated**

Notifies when the state of the game currency has been updated.

> using CBS;

> using UnityEngine;

>

> public class CurrencyExample : MonoBehaviour

> {

>     private ICurrency CurrencyModule { get; set; }

>

>     void Start()

>     {

>         CurrencyModule = CBSModule.Get<CBSCurrency>();

>

>         CurrencyModule.OnCurrencyUpdated += OnCurrencyUpdated;

>     }

>

>     private void OnCurrencyUpdated(CBSUpdateCurrencyResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.LogFormat("Currency with code {0} was updated", result.CurrencyCode);

>         }

>     }

> }



**CBSCurrency.GetCurrencies**

Get data for all currencies.

> using CBS;

> using UnityEngine;

>

> public class CurrencyExample : MonoBehaviour

> {

>     private ICurrency CurrencyModule { get; set; }

>

>     void Start()

>     {

>         CurrencyModule = CBSModule.Get<CBSCurrency>();

>

>         CurrencyModule.GetCurrencies(OnGetCurrencies);

>     }

>

>     private void OnGetCurrencies(CBSGetCurrenciesResult result)

>     {

>         if (result.IsSuccess)

>         {

>             var all = result.Currencies;

>             foreach (var curData in all)

>             {

>                 Debug.LogFormat("Currency code = {0} with value {1}", curData.Key, curData.Value);

>             }

>         }

>     }

> }



**CBSCurrency.AddUserCurrency**

Add currency to the current user.

> using CBS;

> using UnityEngine;

>

> public class CurrencyExample : MonoBehaviour

> {

>     private ICurrency CurrencyModule { get; set; }

>

>     void Start()

>     {

>         CurrencyModule = CBSModule.Get<CBSCurrency>();

>

>         string code = "GD";

>         int addValue = 100;

>

>         CurrencyModule.AddUserCurrency(addValue, code, OnUpdateCurrency);

>     }

>

>     private void OnUpdateCurrency(CBSUpdateCurrencyResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("The user has successfully received the currency");

>         }

>     }

> }



**CBSCurrency.DecreaseUserCurrency**

Reduce the game currency of the current user.

> using CBS;

> using UnityEngine;

>

> public class CurrencyExample : MonoBehaviour

> {

>     private ICurrency CurrencyModule { get; set; }

>

>     void Start()

>     {

>         CurrencyModule = CBSModule.Get<CBSCurrency>();

>

>         string code = "GD";

>         int decreaseValue = 100;

>

>         CurrencyModule.DecreaseUserCurrency(decreaseValue, code, OnDecreaseCurrency);

>     }

>

>     private void OnDecreaseCurrency(CBSUpdateCurrencyResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("Game currency has been successfully updated");

>         }

>     }

> }



**CBSCurrency.GetPacks**

Get all currency packs.

> using CBS;

> using UnityEngine;

>

> public class CurrencyExample : MonoBehaviour

> {

>     private ICurrency CurrencyModule { get; set; }

>

>     void Start()

>     {

>         CurrencyModule = CBSModule.Get<CBSCurrency>();

>

>         CurrencyModule.GetPacks(OnGetPacks);

>     }

>

>     private void OnGetPacks(CBSGetPacksResult result)

>     {

>         if (result.IsSuccess)

>         {

>             var packs = result.Packs;

>             foreach (var pack in packs)

>             {

>                 Debug.Log("Pack name = " + pack.DisplayName);

>             }

>         }

>     }

> }



**CBSCurrency.GetPacksByTag**

Get all currency packs by specific tag

> using CBS;

> using UnityEngine;

>

> public class CurrencyExample : MonoBehaviour

> {

>     private ICurrency CurrencyModule { get; set; }

>

>     void Start()

>     {

>         CurrencyModule = CBSModule.Get<CBSCurrency>();

>

>         string packTag = "Some pack tag";

>

>         CurrencyModule.GetPacksByTag(packTag, OnGetPacks);

>     }

>

>     private void OnGetPacks(CBSGetPacksResult result)

>     {

>         if (result.IsSuccess)

>         {

>             var packs = result.Packs;

>             foreach (var pack in packs)

>             {

>                 Debug.Log("Pack name = " + pack.DisplayName);

>             }

>         }

>     }

> }



**CBSCurrency.GrantPack**

Grant currency pack to current user.

> using CBS;

> using UnityEngine;

>

> public class CurrencyExample : MonoBehaviour

> {

>     private ICurrency CurrencyModule { get; set; }

>

>     void Start()

>     {

>         CurrencyModule = CBSModule.Get<CBSCurrency>();

>

>         string packID = "Some pack id";

>

>         CurrencyModule.GrantPack(packID, OnGrantPack);

>     }

>

>     private void OnGrantPack(CBSGrandPackResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("Pack was granted successfully ");

>         }

>     }

> }

