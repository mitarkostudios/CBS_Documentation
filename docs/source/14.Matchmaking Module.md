<h1> Matchmaking Module </h1>

Give players the opportunity to find each other to play together

The following settings are available in the editor.

**Add new queue - **Add new matchmaking queue

**Impport default - **Import already predefined matchmaking queue list (For quick testing)

![](https://archbee-image-uploads.s3.amazonaws.com/eJQ_to_S35RjGyX2qhcYY/xexknO04lR6LjaDKUURNI_image.png)

Click add new queue to start configure.

![](https://archbee-image-uploads.s3.amazonaws.com/eJQ_to_S35RjGyX2qhcYY/xlSnrrIItx7sGYHvHl1Fp_image.png)

**Queue Name** - The name for a specific queue. It is between 1 and 64 characters long (inclusive) and is case-sensitive. It is alpha-numeric, plus underscores and hyphens, and starts with a letter or number. Generally a queue name represents a way to play a game, such as 4v4CaptureTheFlag or UnrankedRace. When creating a matchmaking ticket, the queue name must be specified to identify which queue it should enter.

**Players Count (Total)** - Players count for this queue. Min value is 2. Max for single mode is 100. Max for team mode is 32.

**Queue Mode** - Defines the type of queue. Can be Single or Team.



**Team configuration**

Click **add new team** to start configurate. The minimum number of teams must be 2.

![](https://archbee-image-uploads.s3.amazonaws.com/eJQ_to_S35RjGyX2qhcYY/HrGEX2R5CLFgtGZGCJT25_image.png)

**Team Name** - You can define the command name. For example blue team or red team.

**Players Count** - Players count for this team. Min value is 1. Please note, the sum of the players count of all teams must match the number of total players count.



**Rules configuration - **Allows you to define the rules by which players will find for each other.

![](https://archbee-image-uploads.s3.amazonaws.com/eJQ_to_S35RjGyX2qhcYY/ulSz8sH6RL9sgcciSG9B2_image.png)

**Level Equality Rule** - Make sure players only find each other with the same levels.

**String Equality Rule - **Make sure players only find each other with the same string value. You can set string value in ticket request. Use this, for example, when you want the participants of the same tournament to find each other, specify the tournament ID as a value.

**Level Difference Rule - **Players will be able to find an opponent within the range of the level. For example, if you specify the difference + -1 - then a player of level 7 will be able to find an opponent of levels 6,7,8.

**Value Difference Rule - **Players will be able to find an opponent within the range of the custom value. For example, if you specify the difference + -15 - then a player has value 40 will be able to find an opponent of value from range 25-55. You can set value in ticket request.



### **API Methods**

****

**CBSMatchmaking.OnStatusChanged**

Notifies about status change in Matchmaking.

> using CBS;

> using UnityEngine;

>

> public class MatchmakingExample : MonoBehaviour

> {

>     private IMatchmaking Matchmaking { get; set; }

>

>     private void Start()

>     {

>         Matchmaking = CBSModule.Get<CBSMatchmaking>();

>

>         Matchmaking.OnStatusChanged += OnStatusChanged;

>     }

>

>     private void OnDestroy()

>     {

>         Matchmaking.OnStatusChanged -= OnStatusChanged;

>     }

>

>     private void OnStatusChanged(MatchmakingStatus status)

>     {

>         Debug.Log("Status of ticket was changed to " + status);

>     }

> }



**CBSMatchmaking.OnMatchStart**

Notifies about the successful completion of the search for opponents.

> using CBS;

> using UnityEngine;

>

> public class MatchmakingExample : MonoBehaviour

> {

>     private IMatchmaking Matchmaking { get; set; }

>

>     private void Start()

>     {

>         Matchmaking = CBSModule.Get<CBSMatchmaking>();

>

>         Matchmaking.OnMatchStart += OnMatchStart;

>     }

>

>     private void OnDestroy()

>     {

>         Matchmaking.OnMatchStart -= OnMatchStart;

>     }

>

>     private void OnMatchStart(StartMatchResult result)

>     {

>         var players = result.Players;

>         var queueName = result.QueueName;

>         var ticketID = result.TicketID;

>         var matchID = result.MatchID;

>     }

> }



**CBSMatchmaking.GetMatchmakingQueuesList**

Get a list of all Queues on the server

> using CBS;

> using UnityEngine;

>

> public class MatchmakingExample : MonoBehaviour

> {

>     private IMatchmaking Matchmaking { get; set; }

>

>     private void Start()

>     {

>         Matchmaking = CBSModule.Get<CBSMatchmaking>();

>

>         Matchmaking.GetMatchmakingQueuesList(OnGetQueueList);

>     }

>

>     private void OnGetQueueList(GetMatchmakingListResult result)

>     {

>         if (result.IsSuccess)

>         {

>             var queueList = result.Queues;

>             foreach (var queue in queueList)

>             {

>                 var queueName = queue.QueueName;

>                 var playerCount = queue.PlayersCount;

>                 var queueMode = queue.Mode;

>             }

>         }

>     }

> }



**CBSMatchmaking.GetMatchmakingQueue**

Get a detailed description of the queue by name.

> using CBS;

> using UnityEngine;

>

> public class MatchmakingExample : MonoBehaviour

> {

>     private IMatchmaking Matchmaking { get; set; }

>

>     private void Start()

>     {

>         Matchmaking = CBSModule.Get<CBSMatchmaking>();

>

>         var queueName = "Your queue name";

>

>         Matchmaking.GetMatchmakingQueue(queueName, OnGetQueue);

>     }

>

>     private void OnGetQueue(GetQueueResult result)

>     {

>         if (result.IsSuccess)

>         {

>             var queue = result.Queue;

>

>             var queueName = queue.QueueName;

>             var playerCount = queue.PlayersCount;

>             var queueMode = queue.Mode;

>         }

>     }

> }



**CBSMatchmaking.FindMatch**

Creates a ticket to find opponents. After a successful call, listen for a change in the status of the queue.

> using CBS;

> using UnityEngine;

>

> public class MatchmakingExample : MonoBehaviour

> {

>     private IMatchmaking Matchmaking { get; set; }

>

>     private void Start()

>     {

>         Matchmaking = CBSModule.Get<CBSMatchmaking>();

>

>         var queueName = "Your queue name";

>

>         var findRequest = new FindMatchRequest { 

>             QueueName = queueName

>         };

>

>         Matchmaking.FindMatch(findRequest, OnStartFindMatch);

>     }

>

>     private void OnStartFindMatch(FindMatchResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("Start search opponent with ticket id " + result.TicketID);

>         }

>     }

> }



**CBSMatchmaking.CancelMatch**

Cancels all search tickets for the current player.

> using CBS;

> using UnityEngine;

>

> public class MatchmakingExample : MonoBehaviour

> {

>     private IMatchmaking Matchmaking { get; set; }

>

>     private void Start()

>     {

>         Matchmaking = CBSModule.Get<CBSMatchmaking>();

>

>         var queueName = "Your queue name";

>

>         Matchmaking.CancelMatch(queueName, OnCancelSearch);

>     }

>

>     private void OnCancelSearch(CancelMatchResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("Cancel search opponent");

>         }

>     }

> }

