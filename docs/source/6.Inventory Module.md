<h1> Inventory Module </h1>

**API Methods**

****

**CBSInventory.OnItemConsumed**

Notify when item was consumed from inventory.

> using CBS;

> using UnityEngine;

>

> public class InventoryExample : MonoBehaviour

> {

>     private ICBSInventory InventoryModule { get; set; }

>

>     private void Start()

>     {

>         InventoryModule = CBSModule.Get<CBSInventory>();

>

>         InventoryModule.OnItemConsumed += OnItemConsumed;

>     }

>

>     private void OnItemConsumed(ConsumeInventoryItemResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.LogFormat("Inventory item {0} consumed", result.InventoryItemId);

>         }

>     }

> }



**CBSInventory.OnItemEquiped**

Notify when item was equipped.

> using CBS;

> using UnityEngine;

>

> public class InventoryExample : MonoBehaviour

> {

>     private ICBSInventory InventoryModule { get; set; }

>

>     private void Start()

>     {

>         InventoryModule = CBSModule.Get<CBSInventory>();

>

>         InventoryModule.OnItemEquiped += OnItemEquiped;

>     }

>

>     private void OnItemEquiped(EquipInventoryItemResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.LogFormat("Inventory item {0} equiped", result.InventoryItemId);

>         }

>     }

> }



**CBSInventory.OnItemUnEquiped**

Notify when item was unequipped.

> using CBS;

> using UnityEngine;

>

> public class InventoryExample : MonoBehaviour

> {

>     private ICBSInventory InventoryModule { get; set; }

>

>     private void Start()

>     {

>         InventoryModule = CBSModule.Get<CBSInventory>();

>

>         InventoryModule.OnItemUnEquiped += OnItemEquiped;

>     }

>

>     private void OnItemEquiped(EquipInventoryItemResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.LogFormat("Inventory item {0} unequiped", result.InventoryItemId);

>         }

>     }

> }

****

**CBSInventory.OnItemAdded**

Notify when item was added to inventory.

> using CBS;

> using UnityEngine;

>

> public class InventoryExample : MonoBehaviour

> {

>     private ICBSInventory InventoryModule { get; set; }

>

>     private void Start()

>     {

>         InventoryModule = CBSModule.Get<CBSInventory>();

>

>         InventoryModule.OnItemAdded += OnItemAdded;

>     }

>

>     private void OnItemAdded(InventoryItemGrandResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.LogFormat("Item {0} added to inventory", result.InventoryItem.DisplayName);

>         }

>     }

> }



**CBSInventory.OnLootboxAdded**

Notify when loot box was added to inventory.

> using CBS;

> using UnityEngine;

>

> public class InventoryExample : MonoBehaviour

> {

>     private ICBSInventory InventoryModule { get; set; }

>

>     private void Start()

>     {

>         InventoryModule = CBSModule.Get<CBSInventory>();

>

>         InventoryModule.OnLootboxAdded += OnLootboxAdded;

>     }

>

>     private void OnLootboxAdded(InventoryLootboxGrandResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.LogFormat("Loot box {0} added to inventory", result.InventoryItem.DisplayName);

>         }

>     }

> }



**CBSInventory.OnLootboxOpen**

Notifies when a user has opened a lootbox.

> using CBS;

> using UnityEngine;

>

> public class InventoryExample : MonoBehaviour

> {

>     private ICBSInventory InventoryModule { get; set; }

>

>     private void Start()

>     {

>         InventoryModule = CBSModule.Get<CBSInventory>();

>

>         InventoryModule.OnLootboxOpen += OnLootboxOpen;

>     }

>

>     private void OnLootboxOpen(OpenLootboxResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("User was open loot box");

>         }

>     }

> }



**CBSInventory.GetInventory**

Get inventory items list of current user.

> using CBS;

> using UnityEngine;

>

> public class InventoryExample : MonoBehaviour

> {

>     private ICBSInventory InventoryModule { get; set; }

>

>     private void Start()

>     {

>         InventoryModule = CBSModule.Get<CBSInventory>();

>

>         InventoryModule.GetInventory(OnGetInventory);

>     }

>

>     private void OnGetInventory(GetInventoryResult result)

>     {

>         if (result.IsSuccess)

>         {

>             var allItems = result.AllItems;

>             var equipedItems = result.EquippedItems;

>             var notEquipedItems = result.NonEquippedItems;

>             var tradableItems = result.TradableItems;

>             var consumableItems = result.ConsumableItems;

>             var equipableItems = result.EquippableItems;

>         }

>     }

> }



**CBSInventory.GetInventoryByCategory**

Get inventory items list of current user by specific category.

> using CBS;

> using UnityEngine;

>

> public class InventoryExample : MonoBehaviour

> {

>     private ICBSInventory InventoryModule { get; set; }

>

>     private void Start()

>     {

>         InventoryModule = CBSModule.Get<CBSInventory>();

>

>         string itemCategory = "your item category";

>

>         InventoryModule.GetInventoryByCategory(itemCategory, OnGetInventory);

>     }

>

>     private void OnGetInventory(GetInventoryResult result)

>     {

>         if (result.IsSuccess)

>         {

>             var allItems = result.AllItems;

>             var equipedItems = result.EquippedItems;

>             var notEquipedItems = result.NonEquippedItems;

>             var tradableItems = result.TradableItems;

>             var consumableItems = result.ConsumableItems;

>             var equipableItems = result.EquippableItems;

>         }

>     }

> }



**CBSInventory.ConsumeItem**

Consume inventory item by item instance id.

> using CBS;

> using UnityEngine;

>

> public class InventoryExample : MonoBehaviour

> {

>     private ICBSInventory InventoryModule { get; set; }

>

>     private void Start()

>     {

>         InventoryModule = CBSModule.Get<CBSInventory>();

>

>         string itemInventoryID = "your item inventory id";

>

>         InventoryModule.ConsumeItem(itemInventoryID, OnConsumeItem);

>     }

>

>     private void OnConsumeItem(ConsumeInventoryItemResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.LogFormat("Item {0} was consumed", result.InventoryItemId);

>         }

>     }

> }



**CBSInventory.ConsumeItem**

Consume inventory item by item instance id.

> using CBS;

> using UnityEngine;

>

> public class InventoryExample : MonoBehaviour

> {

>     private ICBSInventory InventoryModule { get; set; }

>

>     private void Start()

>     {

>         InventoryModule = CBSModule.Get<CBSInventory>();

>

>         string itemInventoryID = "your item inventory id";

>         int consumeCout = 3;

>

>         InventoryModule.ConsumeItem(itemInventoryID, consumeCout, OnConsumeItem);

>     }

>

>     private void OnConsumeItem(ConsumeInventoryItemResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.LogFormat("Item {0} was consumed", result.InventoryItemId);

>         }

>     }

> }

****

**CBSInventory.GetInventoryItem**

Consume full information of inventory item by instance id.

> using CBS;

> using UnityEngine;

>

> public class InventoryExample : MonoBehaviour

> {

>     private ICBSInventory InventoryModule { get; set; }

>

>     private void Start()

>     {

>         InventoryModule = CBSModule.Get<CBSInventory>();

>

>         string itemInventoryID = "your item inventory id";

>

>         InventoryModule.GetInventoryItem(itemInventoryID, OnGetItem);

>     }

>

>     private void OnGetItem(GetInventoryItemResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.LogFormat("Item {0} with name {1}", result.InventoryItem.ID, result.InventoryItem.DisplayName);

>         }

>     }

> }



**CBSInventory.SetInventoryItemData**

Set unique data for item. For example, ID cells in the inventory. Not to be confused with Item Custom Data.

> using CBS;

> using UnityEngine;

>

> public class InventoryExample : MonoBehaviour

> {

>     private ICBSInventory InventoryModule { get; set; }

>

>     private void Start()

>     {

>         InventoryModule = CBSModule.Get<CBSInventory>();

>

>         string itemInventoryID = "your item inventory id";

>         string dataKey = "CellID";

>         string dataValue = "2:14";

>

>         InventoryModule.SetInventoryItemData(itemInventoryID, dataKey, dataValue, OnSetData);

>     }

>

>     private void OnSetData(SetInventoryDataResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("Data saved");

>         }

>     }

> }

****

**CBSInventory.UpdateItemCustomData**

Update custom base item data for a specific item in inventory. For example, you have a sword and want to improve it in the forge.

> using CBS;

> using CBS.Example;

> using UnityEngine;

>

> public class InventoryExample : MonoBehaviour

> {

>     private ICBSInventory InventoryModule { get; set; }

>

>     private void Start()

>     {

>         InventoryModule = CBSModule.Get<CBSInventory>();

>

>         string itemInventoryID = "your inventory item ID";

>         var inventoryItem = InventoryModule.GetInventoryItemFromCache(itemInventoryID);

>         var baseData = inventoryItem.GetCustomData<SwordData>();

>         baseData.Attack += 10;

>         baseData.Speed += 100;

>

>         InventoryModule.UpdateItemCustomData(baseData, itemInventoryID, OnSetData);

>     }

>

>     private void OnSetData(SetInventoryDataResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("Data saved");

>         }

>     }

> }



**CBSInventory.EquipItem**

Equip item from inventory.

> using CBS;

> using UnityEngine;

>

> public class InventoryExample : MonoBehaviour

> {

>     private ICBSInventory InventoryModule { get; set; }

>

>     private void Start()

>     {

>         InventoryModule = CBSModule.Get<CBSInventory>();

>

>         string itemInventoryID = "your inventory item ID";

>

>         InventoryModule.EquipItem(itemInventoryID, OnEquip);

>     }

>

>     private void OnEquip(EquipInventoryItemResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.LogFormat("Item {0} was equiped", result.InventoryItemId);

>         }

>     }

> }



**CBSInventory.UnEquipItem**

Unequip item from inventory.

> using CBS;

> using UnityEngine;

>

> public class InventoryExample : MonoBehaviour

> {

>     private ICBSInventory InventoryModule { get; set; }

>

>     private void Start()

>     {

>         InventoryModule = CBSModule.Get<CBSInventory>();

>

>         string itemInventoryID = "your inventory item ID";

>

>         InventoryModule.UnEquipItem(itemInventoryID, OnUnEquip);

>     }

>

>     private void OnUnEquip(EquipInventoryItemResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.LogFormat("Item {0} was unequipped", result.InventoryItemId);

>         }

>     }

> }



**CBSInventory.GetLootboxes**

Get loot bob list from inventory.

> using CBS;

> using UnityEngine;

>

> public class InventoryExample : MonoBehaviour

> {

>     private ICBSInventory InventoryModule { get; set; }

>

>     private void Start()

>     {

>         InventoryModule = CBSModule.Get<CBSInventory>();

>

>         InventoryModule.GetLootboxes(OnGetLootboxes);

>     }

>

>     private void OnGetLootboxes(GetInventoryLootboxesResult result)

>     {

>         if (result.IsSuccess)

>         {

>             var lootboxes = result.Lootboxes;

>             foreach (var lootbox in lootboxes)

>             {

>                 Debug.Log("Lootbox name = " + lootbox.DisplayName);

>             }

>         }

>     }

> }

****

**CBSInventory.GetLootboxesByCategory**

Get loot bob list from inventory by category.

> using CBS;

> using UnityEngine;

>

> public class InventoryExample : MonoBehaviour

> {

>     private ICBSInventory InventoryModule { get; set; }

>

>     private void Start()

>     {

>         InventoryModule = CBSModule.Get<CBSInventory>();

>

>         string category = "your loot box category";

>

>         InventoryModule.GetLootboxesByCategory(category, OnGetLootboxes);

>     }

>

>     private void OnGetLootboxes(GetInventoryLootboxesResult result)

>     {

>         if (result.IsSuccess)

>         {

>             var lootboxes = result.Lootboxes;

>             foreach (var lootbox in lootboxes)

>             {

>                 Debug.Log("Lootbox name = " + lootbox.DisplayName);

>             }

>         }

>     }

> }



**CBSInventory.OpenLootbox**

Open loot box and get reward.

> using CBS;

> using UnityEngine;

>

> public class InventoryExample : MonoBehaviour

> {

>     private ICBSInventory InventoryModule { get; set; }

>

>     private void Start()

>     {

>         InventoryModule = CBSModule.Get<CBSInventory>();

>

>         string lootboxInventoryID = "your loot box id";

>

>         InventoryModule.OpenLootbox(lootboxInventoryID, OnLootboxOpen);

>     }

>

>     private void OnLootboxOpen(OpenLootboxResult result)

>     {

>         if (result.IsSuccess)

>         {

>             Debug.Log("User was open loot box");

>         }

>     }

> }



**CBSInventory.GetInventoryFromCache**

Get last cached inventory.

> using CBS;

> using UnityEngine;

>

> public class InventoryExample : MonoBehaviour

> {

>     private ICBSInventory InventoryModule { get; set; }

>

>     private void Start()

>     {

>         InventoryModule = CBSModule.Get<CBSInventory>();

>

>         var inventory = InventoryModule.GetInventoryFromCache();

>

>         var allItems = inventory.AllItems;

>         var equipedItems = inventory.EquippedItems;

>         var notEquipedItems = inventory.NonEquippedItems;

>         var tradableItems = inventory.TradableItems;

>         var consumableItems = inventory.ConsumableItems;

>         var equipableItems = inventory.EquippableItems;

>     }

> }



**CBSInventory.GetLootboxesFromCache**

Get last cached loot box list

> using CBS;

> using UnityEngine;

>

> public class InventoryExample : MonoBehaviour

> {

>     private ICBSInventory InventoryModule { get; set; }

>

>     private void Start()

>     {

>         InventoryModule = CBSModule.Get<CBSInventory>();

>

>         var lootboxes = InventoryModule.GetLootboxesFromCache().Lootboxes;

>

>         foreach (var lootbox in lootboxes)

>         {

>             Debug.Log("Lootbox name = " + lootbox.DisplayName);

>         }

>     }

> }



**CBSInventory.GetInventoryItemFromCache**

Get specific item from cache inventory.

